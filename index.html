<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Django Tutorial</title>
    <link href="style.css" type="text/css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Cousine|Nanum+Gothic+Coding&display=swap" rel="stylesheet">


</head>
<body>

<nav id="navbar" class="sidenav">
    <header>Django: Inception to Deploy</header>
    <a href="#basic_assumptions" class="nav-link"> Basic Assumptions</a>
    <a href="#install_dependencies" class="nav-link">Install Dependencies</a>
    <a href="#getting_started" class="nav-link">Getting Started</a>
    <a href="#database_setup" class="nav-link">Database Setup</a>
    <a href="#models" class="nav-link">Models</a>
    <a href="#using_django_admin" class="nav-link">Using Django Admin</a>
    <a href="#todo_views_urls" class="nav-link">Todo Views & Urls</a>
    <a href="#item_views_urls" class="nav-link">Item Views & Urls</a>
    <a href="#adding_forms" class="nav-link">Adding Forms</a>
    <a href="#connecting_stylesheet" class="nav-link">Connecting Stylesheet</a>
    <a href="#credits_and_links" class="nav-link">Credits & Links</a>

</nav>

<main id="main-doc">
    <section class="main-section" id="basic_assumptions">
        <header class="heading"> Basic Assumptions</header>
        <h3>Working with django and python in this tutorial makes some assumptions about pre-requisite comfort with the
            development of websites in general:
        </h3>
        <ul>
            <li>You know how to connect to files root directories and make new files within that structure</li>
            <li>You have a working knowledge of terminal commands</li>
            <li>You have a grasp of python syntax and some experience using the language</li>
            <li>You have some experience with backend views</li>
            <li>You are comfortable with basic CSS and HTML</li>
            <li>You can troubleshoot and debug if issues come up as you work through the tutorial steps</li>
        </ul>
    </section>
    <section class="main-section" id="install_dependencies">
        <header class="heading">Install Dependencies</header>
        <p>For django applications, you will need to install python and a tool that creates virtual environments called
            pipenv. Check your system to see which version of python you have available. You can also check for
            pipenv by using the following terminal commands: </p>
        <code> $ python3 --version </code>
        <br>
        <code> $ pipenv --version </code>

            <p>I recommend Python 3.7 or higher for best performance. If you need to install either program use
                Homebrew to install them globally with these commands: </p>
        <code> $ brew install python </code>
        <br>
        <code> $ brew install pipenv </code>
        <p> Now you need to create a directory for your project. My application is a simple 'todo' list that I am
            calling 'honeyDo-django'. Once you make this directory, you will need to cd into it for the next round
            of installations. </p>
        <code> $ mkdir honeyDo-django </code>
        <p> OR <br> You can create a corresponding GitHub repo, initialize it with a README.md, and clone
            into it for easy git connection to make the root directory. </p>
        <code> $ git clone &ltREPO URL> </code>
        <br>
        <code> $ cd honeyDo-django/ </code>
        <p> Now you are going to use pipenv to install locally inside your project. It is important NOT to install
            these dependencies globally! Also, unlike npm, you will need to type out 'install' as 'i' doesn't work.
            The first installation will be django itself. The second is a library that will connect django to
            postgreSQL which will be hosting the database information. </p>
        <code> $ pipenv install django </code>
        <br>
        <code> $ pipenv install psycopg2-binary </code>

    </section>

    <section class="main-section" id="getting_started">
        <header class="heading">Getting Started</header>
        <p>Now when you open the project in a text editor, you will see two new files have been added: Pipfile and
            Pipfile.lock. These function as a holding place for all dependencies and works similarly to node_modules,
            but do not require gitignore. The next step is to start the project itself. Naming convention can make
            this a little confusing, so be sure to know which directory is the root of the project and which one is
            the application itself. </p>
        <code> $ pipenv run django-admin startproject honeyDo_django . </code>
        <p> A few things to notice. First, you can substitute any name for your project after the startproject
            command, but best practice is to use snake_case for python/django. Second, the . at the end of the
            command is important so you don't create a sub-folder within the project. Finally, when you return to
            your text editor, you will see several new files have been created automatically. Now it is time to enter
            the virtual environment inside the project. Use this command to enter: </p>
            <code> $ pipenv shell </code>
            <p> You should notice a change in your bash command. Depending on the individual set up, it may
                explicitly say 'virtual env' or 'env' OR it may put your project name in front of the $. If this
                command doesn't work, you can also try: </p>
        <code> $ source .env/bin/activate </code>
        <p> Once inside the virtual environment, you need to create the application files. This time you will not
            need the . at the end.</p>
        <code> $ django-admin startapp honeyDo_app </code>
        <p> If django-admin doesn't work for some reason, you can replace it with <code>python3 manage.py</code> as
            long as that file exists in the current directory.
        </p>
    </section>
        <section class="main-section" id="database_setup">
            <header class="heading">Database Setup</header>
        <p> Now that all the django files are in place, it is time to switch gears and set up the database. For this
        project, you will use PostgreSQL, which is a more robust relational database than the default SQLite. If you
        need to install this locally, please follow <a href="https://www.postgresql.org/download/">this link</a> and
        select the appropriate version for your home machine. Once the application is installed and running, return to
            the terminal and open a new tab. You do not need to cd into the project to set up this database, but you
        will need to make note of the values entered since they will need to be inputted into the settings of your
            django project as well. First use this command to login to PostgreSQL:</p>
            <code> $ psql -d postgres </code>
            <p> You should enter into a new field within the terminal. The prompt may have '>' or 'postgres=#' to
                show access to the application. Now, create a database using the following commands: (Please note the uppercase may not be
                necessary on all operating systems.) PostgreSQL is case sensative and all database names MUST be
                lowercase. Also note the syntax with 'password' and ; at the end of the commands. You should get
                confirmation in the terminal after each command is executed. As always, you can change the values of
                the project to match your application and desired user name and password.
            </p>
            <code> CREATE DATABASE honeydo</code><br><code> CREATE USER honeyuser WITH PASSWORD 'honey'; </code>
            <br> <code> GRANT ALL PRIVILEGES ON DATABASE honeydo TO honeyuser </code> <br> <code> \q </code>
            <p> Now that the database is created, return to your text editor. Inside the project directory you need
                to find (around line 76) and enter the database information into the <code>settings.py</code> file as
                follows:
            </p>
<code> <pre>
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
         'NAME': 'honeydo',
         'USER': 'honeyuser',
         'PASSWORD': 'honey',
         'HOST': 'localhost',
    }
}
</pre>
</code>
            <p> You will also need to include the name of the application at the bottom of the INSTALLED_APPS list
                (around line 33). Please note this must match the name of the directory, NOT the database.</p>
            <code> <pre>
INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'honeyDo_app',
]
            </pre></code>
            <p> Now, finally, you can run this terminal command and navigate to localhost:8000 to see a welcome
                Django app page!</p>
            <code> $ python3 manage.py runserver </code>
            <img src="./images/django-confirm.png" alt="confirmation page with django rocket"/>
            <p> To see a list of commands simply type <code>python3 manage.py</code> or visit <a
                    href="https://docs.djangoproject.com/en/2.1/ref/django-admin/">djangoproject.com</a> for
                full documentation on django-admin/manage.py.</p>
    </section>
    <section class="main-section" id="models">
        <header class="heading">Models</header>
        <p> It's time to create the interface that will allow you to generate data for the database. Models are
            built using python classes. This class will determine the information you want to be added to each
            instance of the model. In this case, I want a model 'Todo' that will hold all the 'todo' items so that
            model will need fields for a title, date, and person (who will be doing the list). Since I want to have
            many items possible on my single 'Todo' list, I will also need a second model that will have ForeignKey
            relationship to the 'Todo' list. Open the <code>models.py</code> file and add the following:</p>
        <code><pre>
from django.db import models
from datetime import date

# Create your models here.
class Todo(models.Model):
    title = models.CharField(max_length=180)
    date = models.DateField(auto_now=False, auto_now_add=False, default=date.today)
    person = models.CharField(max_length=100)

    def __str__(self):
        return self.title

class Item(models.Model):
    name = models.CharField(default='', max_length=300)
    task = models.ForeignKey(Todo, on_delete=models.CASCADE, related_name='tasks')

    def __str__(self):
        return self.name
        </pre></code>
        <p> In order to use this model, it must be migrated to the database. These two
            commands will not only
            configure the database information, but also store a record of the work inside the migrations directory
            in your project. Visit <a href="https://docs.djangoproject.com/en/2.1/topics/migrations/">djangoproject
                .com</a> for the full documentation on migrations. Green <span style="color:green;">OK</span> will
            indicate everything worked. Now, you can have as many models and fields as you want, but I recommend
            keeping it simple since this is a relational database and too many relationships will quickly get
            challenging to manage! (You will need to quit the server before running the commands.)
        </p>
        <code> $ python3 manage.py makemigrations </code>
        <br>
        <code> $ python3 manage.py migrate </code>
    </section>
    <section class="main-section" id="using_django_admin">
        <header class="heading">Using Django Admin</header>
        <p> One of the reasons I love django is that it comes with an admin authentication that will allow you to
            access all the CRUD features without needing any other interface. In order to access this feature, you
            need to create a superuser and password. Unlike the database user/password, keep this information safe
            and private since it grants access to all the pieces of your app! To set it up, run this command in
            the terminal and fill out the fields.</p>
        <code> $ python3 manage.py createsuperuser </code>
        <p> Now, open the <code>admin.py</code> file and add the following code:</p>
        <code><pre>
from django.contrib import admin
from .models import Todo, Item

# Register your models here.
admin.site.register(Todo)
admin.site.register(Item)
        </pre></code>
<p> Finally you can access your database! Navigate to <a href="http://localhost:8000/admin ">localhost</a> to login
    and view your app. So far these models can make todo lists and tasks that can be assigned to the lists. However, you will also notice that the
    tasks don't show up in the lists. Don't worry, that will come soon when you add the user views to the project.
    </p>
<img src="./images/django-admin-home.png" alt="successful login screen example"/>
        <p>(I love how the datetime automatically adds a mini-calendar to the application! This will come in handy later as
            well.)</p>
        <img src="./images/django-admin-calendar.png" alt="sample todo with mini calendar"/>
        <p> On a side note, you might want to seed your database before doing any of this. If you have data already
            in place, you can visit
            <a href="https://docs.djangoproject.com/en/2.1/howto/initial-data/">djangoproject.com</a> for the full
            documentation on seed data formats. </p>
    </section>
    <section class="main-section" id="todo_views_urls">
        <header class="heading">Todo Views & Urls</header>
        <p> Great! We have a working app, but this isn't terribly practical for a user. Next you will need to
            navigate into the <code>views.py</code> file from the application directory. This is where the python code
            will create an interface through Django that is similar to HTML pages. Begin by adding the following to
            line 2 (under the django.shortcuts import) to access the models:
        </p>
        <code>from .models import Todo, Item</code>
        <p> Next, you need to create a python method that will render a list of all the Todo lists created in the admin
        console. Notice the request is followed by an html page. This will be set up later.</p>
        <code><pre>
def todo_list(request):
    todos = Todo.objects.all()
    return render(request, 'todo_list.html', {'todos': todos})
        </pre></code>
        <p> Users of this program will want to see one todo list at a time. Note the conversion of id to pk. Id is automatically assigned to JSON data,
            but pk (primary key) is what is used by the database and django which will be important for building out
            the html pages.
        </p>
        <code><pre>
def todo_detail(request, pk):
    todo = Todo.objects.get(id = pk)
    return render(request, 'todo_detail.html', {'todo': todo})
        </pre></code>
    </section>
    <section class="main-section" id="item_views_urls">
        <header class="heading">Item Views & Urls</header>
    </section>
    <section class="main-section" id="adding_forms">
        <header class="heading">Adding Forms</header>
    </section>
    <section class="main-section" id="connecting_stylesheet">
        <header class="heading">Connecting Stylesheet</header>
    </section>
    <section class="main-section" id="credits_and_links">
        <header class="heading">Credits & Links</header>
        <p>Please visit the deployed application on Heroku
            <a href="" >honeyDo-django</a> and feel free to submit comments or improvements via an issue in the
            <a href="https://github.com/spianoDev/honeyDo-django"> honeyDo-django GitHub</a> Repo.
        </p>
    </section>

</main>

</body>
</html>
